String.prototype.trim||(String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}),window.LayerInit={options:{scrollbar:!0,shade:.2,shadeClose:!1},init:function(e){e=e||{},window.LayerInit.options=jQuery.extend({},window.LayerInit.options,e),layer.config({anim:9})},changeTitle:function(e,t){layer.title(e,t)},load:function(e){return e=jQuery.extend({type:0},e||{}),layer.load(e.type,{area:"60px",shadeClose:!1,content:e.content,shade:LayerInit.options.shade})},loadMsg:function(e){return e="<img src=../../asserts/images/loading.gif / class='load-img'>"+e,layer.alert(e,{title:!1,closeBtn:0,btn:[],offset:"250px",scrollbar:!1,shade:LayerInit.options.shade})},alert:function(e,t){return t=t||1,layer.alert(e,{icon:t,offset:"250px",scrollbar:!1,shade:LayerInit.options.shade})},confirm:function(e){var t=e.btn||["确定","取消"],n=layer.confirm(e.msg,{icon:e.icon||-1,title:e.title||"提示",area:e.area||["410px","auto"],closeBtn:e.closeBtn||1,btn:t,success:function(t,n){$(document).off("keydown").on("keydown",function(t){13==t.keyCode&&($(".layui-layer").focus(),e.yes&&e.yes(n),t&&t.preventDefault?t.preventDefault():window.event.returnValue=!1)})},offset:"250px",shadeClose:LayerInit.options.shadeClose,scrollbar:!1,shade:LayerInit.options.shade},function(){e.yes&&e.yes(n)},function(){e.cancel&&e.cancel(),layer.close(n)});return n},openImg:function(e,t){var n=layer.open({type:1,title:e.title||!1,closeBtn:1,area:e.area||"auto",shadeClose:LayerInit.options.shadeClose,scrollbar:!1,shade:LayerInit.options.shade,content:e.content});return t&&t.blur(),n},openContent:function(e){var t=layer.open({type:1,title:e.title||!1,closeBtn:1,btn:e.btn,shadeClose:LayerInit.options.shadeClose,scrollbar:LayerInit.options.scrollbar,shade:LayerInit.options.shade,area:e.area||["450px","auto"],yes:function(){e.yes&&e.yes(t)},btn2:function(t,n){e.btn2?e.btn2(t):(e.cancel&&e.cancel(),layer.close(t))},cancel:function(){e.cancel&&e.cancel(),layer.close(t)},content:e.content});return t},openIframe:function(e){return layer.open({type:2,title:e.title,shadeClose:LayerInit.options.shadeClose,scrollbar:LayerInit.options.scrollbar,shade:LayerInit.options.shade,area:e.area||["360px","90%"],content:e.url||"http://www.baidu.com"})}},window.CL={authAli:function(){LayerInit.confirm({title:"1688授权过期提示",area:["400px","204px"],btn:["立即进行1688接口授权"],yes:function(e){layer.msg("立即授权"),layer.close(e)},msg:"<p class='p-text'>您的1688接口授权已经过期，需要重新授权才能铺货商品和同步库存。是否立即进行1688接口授权</p>"})},isUrl:function(e){if(e.indexOf("?")){e=e.split("?")[0];return/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(e)}return!1},toCDB:function(e){for(var t="",n=0;n<e.length;n++)e.charCodeAt(n)>65248&&e.charCodeAt(n)<65375?t+=String.fromCharCode(e.charCodeAt(n)-65248):t+=String.fromCharCode(e.charCodeAt(n));return t},deleteLastComma:function(e){return e.replace(/(\,|\，)+$/,"")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isUndefined:function(e){return void 0===e},isFunction:function(e){return e instanceof Function},isArray:function(e){return e instanceof Array},getUrlArgs:function(e){e=e||window.location.href;var t=-1===(e=decodeURIComponent(e)).indexOf("?")?"":e.substring(e.indexOf("?")+1),n={};if(""!==t){t=t.split("&");for(var a=0;a<t.length;a++){n[t[a].split("=")[0]]=t[a].split("=")[1]}}return n},remove:function(e,t){for(var n=[],a=0,i=e.length;a<i;a++)e[a]!=t&&n.push(e[a]);return n},getUniqueArr:function(e,t){for(var n=[],a=(t=t||"clazz",0);a<e.length;a++)-1===n.indexOf(e[a][t])&&n.push(e[a][t]);return n},decimalDeal:function(e,t){return t=t||2,e=e.toFixed(t).toString(),0==parseInt(e.substring(e.indexOf(".")+1))&&(e=parseInt(e)),e},getCurrentPath:function(){return location.pathname},getBodyWH:function(){var e=document.documentElement.clientWidth||document.body.clientWidth,t=document.documentElement.clientHeight||document.body.clientHeight;return{w:e<1200?1e3:e,h:t}},getTimeDetail:function(e,t){var n;t=t||1;var a=function(e){return e<10&&(e="0"+e),e},i={year:(n="now"===e?new Date:new Date(e)).getFullYear(),month:a(parseInt(n.getMonth()+1)),date:a(n.getDate()),hour:a(n.getHours()),minute:a(n.getMinutes()),second:a(n.getSeconds()),week:n.getDay()};return 1==t?i.year+"年"+i.month+"月"+i.date+"日    "+i.hour+":"+i.minute+":"+i.second:2==t?i.year+"-"+i.month+"-"+i.date+" "+i.hour+":"+i.minute:3==t?i.year+"-"+i.month+"-"+i.date+" 23:59":4==t?i.year+"-"+i.month+"-"+i.date:i},addDay:function(e,t){"string"==typeof e&&(e=new Date(e.replace(/\-/g,"/")));var n=window.CL.getTimeDetail(e,3).replace(/\-/g,"/");return new Date(n).getTime()+24*(t-1)*60*60*1e3},getTimeDiff:function(e,t){"string"==typeof e&&(e=new Date(e.replace(/\-/g,"/"))),t=new Date(t.replace(/\-/g,"/"));var n=Math.abs(e.getTime()-e.getTime());return Math.floor(n/864e5)},compareTime:function(e,t){return"string"==typeof e&&(e=new Date(e.replace(/\-/g,"/"))),"string"==typeof t&&(t=new Date(t.replace(/\-/g,"/"))),e<t},removeSeconds:function(e){return e.substring(0,e.length-3)},preventDefault:function(e){e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1}},$.extend({onlyNumber:function(e){e.on("keyup",function(e){var t=$(this);t.val(t.val().trim().replace(/[^\d.]/g,""))})},paging:function(e,t){t.per_items=t.per_items||10,e.pagination(t.num_entries,{current_page:0,callback:t.callback,items_per_page:t.per_items,load_first_page:!1,num_edge_entries:1,num_display_entries:4,prev_text:"上一页",next_text:"下一页",pager_other:t.pager_other?t.pager_other:"",first_text:t.first_text?t.first_text:"首页",last_text:t.last_text?t.last_text:"尾页",link_has_button:!!t.link_has_button&&t.link_has_button})},selectByData:function(e,t,n){n=n||"查无结果",e.select2({language:{noResults:function(){return n}},data:t})},selectSearch:function(e,t,n){n=n||"查无结果",(e=e||$("select")).select2({language:{noResults:function(){return n}},maximumSelectionSize:t||10})},selectNotSearch:function(e){(e=e||$("select")).select2({minimumResultsForSearch:1/0})},initLayDate:function(e){var t={elem:"#id",type:"datetime",format:"yyyy-MM-dd HH:mm:ss",value:new Date,min:"2017-01-01 00:00:00",max:"2099-01-01 00:00:00",showBottom:!0,btns:["clear","now","confirm"],theme:"molv",calendar:!0,mark:{"0-11-21":"生日"},change:function(e,t,n){$(".laydate-btns-confirm").click()},done:function(e,t){2017===t.year&&11===t.month&&21===t.date&&n.hint("中国人民抗日战争胜利万岁")}};e=jQuery.extend({},t,e);var n=laydate.render(e)},templateInit:function(){template.defaults.imports.dateFormat=function(e,t){e=new Date(e);return 1==t?e=window.CL.getTimeDetail(e,1):2==t&&(e=window.CL.getTimeDetail(e,2)),e}},ajaxByGet:function(e,t,n,a){if(!(a=!!a))var i=window.LayerInit.load();jQuery.ajax({url:e,type:"GET",data:t,dataType:"json",success:function(e){switch(e.code){case 1e3:layer.msg("服务端错误："+e.msg);break;case 1002:CL.authAli();break;default:""!=e.msg&&layer.msg(e.msg),CL.isFunction(n)&&n(e)}a||layer.close(i)},error:function(){a||layer.close(i),layer.msg("获取数据失败请稍后再试！")}})},ajaxByPost:function(e,t,n,a){if(!(a=!!a))var i=window.LayerInit.load();jQuery.ajax({url:e,type:"POST",data:t,dataType:"json",success:function(e){switch(e.code){case 1e3:layer.msg("服务端错误："+e.msg);break;case 1002:CL.authAli();break;default:""!=e.msg&&layer.msg(e.msg),CL.isFunction(n)&&n(e)}a||layer.close(i)},error:function(){a||layer.close(i),layer.msg("获取数据失败请稍后再试！")}})},limitNum:function(e){e.on("keyup",function(e){var t=$(this);t.val(t.val().trim().replace(/[^\d.]/g,""))})},tooltip:function(){jQuery("[title]").attr("data-toggle","tooltip"),jQuery('[data-toggle="tooltip"]').tooltip()}}),jQuery.fn.fixedBottom=function(e){"use strict";e=e||{};var t=this,n=CL.getBodyWH().h,a=t.css("height"),i={settings:{mainEle:$("#mainSection")},getEleOffset:function(){var e=t.offset().top;return document.body.scrollTop+n-(e+parseInt(a))<=0?(t.addClass("active"),i.settings.mainEle.css("marginBottom",a)):t.removeClass("active"),t.css("width",i.settings.mainEle.width()),e},fixedScroll:function(e){$(window).off("scroll").on("scroll",function(){document.body.scrollTop+n-(e+parseInt(a))>=0?(t.removeClass("active"),i.settings.mainEle.css("marginBottom",0)):(t.addClass("active"),i.settings.mainEle.css("marginBottom",a))})},winResize:function(){$(window).resize(function(){t.css("width",i.settings.mainEle.width()),n=CL.getBodyWH().h})}};i.settings=jQuery.extend({},i.settings,e),t.removeClass("active");var s=i.getEleOffset();i.fixedScroll(s),i.winResize()},jQuery.fn.checkAll=function(e){"use strict";e=e||{};var t=this,n={settings:{child:$("input[type=checkbox]"),callback:function(e){console.log("checkbox 全选完成后的事件")},itemCallback:function(){console.log("每一项选择绑定事件")}},isCheckAll:function(){var e=!0;return n.settings.child.each(function(){if(!$(this).hasClass("checked"))return e=!1,!1}),e},selectClick:function(){t.off("click").on("click",function(){var e=$(this).prop("checked");e?n.settings.child.addClass("checked").prop("checked",!0):n.settings.child.removeClass("checked").prop("checked",!1),n.settings.callback(e)})},itemClick:function(){n.settings.child.off("click").on("click",function(){var e=$(this);e.prop("checked")?e.addClass("checked"):e.removeClass("checked");var a=n.isCheckAll();a?t.prop("checked",!0):t.prop("checked",!1),n.settings.itemCallback(a)})}};n.settings=jQuery.extend({},n.settings,e),n.selectClick(),n.itemClick()},jQuery.fn.stepInit=function(e){e=$.extend({step:0,part:!1,finish:!1,data:["步骤一","步骤二","步骤三"]},e||{}),this.empty();for(var t="",n=0;n<e.data.length;n++)n==e.step?e.part&&0==e.finish?t+='<span class="current"><i>'+(n+1)+"</i>"+e.data[n]+"</span>":t+='<span class="current finish"><i>'+(n+1)+"</i>"+e.data[n]+"</span>":n<e.step?t+='<span class="current finish"><i>'+(n+1)+"</i>"+e.data[n]+"</span>":t+="<span><i>"+(n+1)+"</i>"+e.data[n]+"</span>";this.html(t)},jQuery.fn.shopListInit=function(e){var t=this,n={getSellercatList:function(){var t=sessionStorage.sellercats;null==t?$.ajaxByGet("/web/cuxiao/getsellercatlist",null,function(e){sessionStorage.sellercats=JSON.stringify(e.data.list),n.showShopClassify(e.data.list)}):(t=JSON.parse(t),n.showShopClassify(t)),e&&e()},showShopClassify:function(e){for(var n='<option value="">按店铺分类筛选</option>',a=0;a<e.length;a++){var i=e[a].id,s=e[a].name;0!=e[a].pid&&(s="|&nbsp;&nbsp;&nbsp;&nbsp;"+s),n+='<option value="'+i+'">'+s+"</option>"}$(t).empty().append(n).select2({minimumResultsForSearch:1/0,maximumSelectionSize:5})}};n.getSellercatList()},jQuery.fn.tabsMenu=function(e){e=$.extend({tabEle:".btn",activeClass:"active"},e||{});var t=this.find(e.tabEle);return t.on("click",function(){var n=$(this),a=n.data("value"),i=n.parents(".tabs-menu");t.removeClass(e.activeClass),n.addClass(e.activeClass);var s=i.next(".tab-content").find(".tab-pane");s.each(function(){var t=$(this);a==t.data("value")&&(s.removeClass(e.activeClass),t.addClass(e.activeClass))})}),this},jQuery.fn.conToggle=function(e){e=$.extend({content:"",isToggle:!1,showClass:"show"},e||{});var t=$(e.content);e.isToggle?(this.removeClass(e.showClass),t.addClass(e.showClass)):(this.addClass(e.showClass),t.removeClass(e.showClass))},jQuery.fn.toggleClick=function(e){var t=this;function n(t){t.data(e.data)==e.currentData?t.addClass(e.activeClass):t.removeClass(e.activeClass)}function a(){(t.each(function(){n($(this))}),e.content)&&$(e.content).each(function(){n($(this))});e.callback&&e.callback(e.currentData.toString())}e=$.extend({content:"",data:"value",activeClass:"active",currentData:"",callback:function(e){console.log(e+"click以后的回调事件")}},e||{}),a(),t.off("click").on("click",function(){var t=$(this);e.currentData=t.data(e.data),a()})},jQuery.fn.proWidth=function(e){e=$.extend({width:"10%"},e||{});var t=this.find(".progress-bar");t.attr("aria-valuenow",e.width.substr(0,e.width.length-1)),t.css("width",e.width)},jQuery.fn.dealErrorMsg=function(e){e=$.extend({msg:"",errorBox:".form-group",otherClass:""},e||{});var t=this.parents(e.errorBox);""==e.msg?(t.removeClass("has-error"),t.find(".error").remove()):(t.addClass("has-error"),t.find("span").hasClass("error")?t.find(".error").html("<i class='iconfont icon-timescircle'></i>"+e.msg):t.append("<span class='error "+e.otherClass+"'><i class='iconfont icon-timescircle'></i>"+e.msg+"</span>"))},jQuery.fn.shopListInit=function(e){var t=this,n={getSellercatList:function(){var t=sessionStorage.sellercats;null==t?$.ajaxByGet("/web/cuxiao/getsellercatlist",null,function(e){sessionStorage.sellercats=JSON.stringify(e.data.list),n.showShopClassify(e.data.list)}):(t=JSON.parse(t),n.showShopClassify(t)),e&&e()},showShopClassify:function(e){for(var n='<option value="">按店铺分类筛选</option>',a=0;a<e.length;a++){var i=e[a].id,s=e[a].name;0!=e[a].pid&&(s="|&nbsp;&nbsp;&nbsp;&nbsp;"+s),n+='<option value="'+i+'">'+s+"</option>"}t.empty().append(n),$.selectSearch(t)}};n.getSellercatList()},function(e,t){var n={init:function(){window.LayerInit.init(),t.templateInit(),n.navDeal(),t.tooltip(),n.fixedAsideBind()},fixedAsideBind:function(){var e=t(".fixed-aside").find("li");e.on("mouseenter",function(){t(this).find(".tip").html(t(this).attr("data-title")).end().addClass("hover")}),e.on("mouseleave",function(){t(this).removeClass("hover").find(".tip").html("")})},navDeal:function(){var e=window.location.pathname,n=0;n=null!=e.match(/agentorder/gi)?3:null!=e.match(/stocksyn/gi)?2:null!=e.match(/\/home\//gi)?0:1,t("#mainNav").find("li").each(function(){var e=t(this);e.index()==n?e.hasClass("active")||e.addClass("active"):e.removeClass("active")})},exitLogin:function(){t("#exitLogin").on("click",function(){window.location.href="/account/SignOut"})}};t(function(){LayerInit.init(),n.init()})}(window,jQuery);