!function(){var e={init:function(){e.verify(),e.register()},verify:function(){$(".verify-code").on("click",function(){var e=$(this),n=60,i=$.validate($("#phone"));!e.hasClass("inactive")&&i&&(console.log($("#phone").valTrim()),$.ajaxByPost("login/sendCode",{telephone:$("#phone").valTrim()},function(i){if(console.log(i),200==i.code){e.addClass("inactive").html(n+"秒");var t=setInterval(function(){e.html(n+"秒"),1==n&&(clearInterval(t),e.removeClass("inactive").html("获取验证码")),n--},1e3);console.log(i)}else layer.msg(i.detailMessage)}))})},register:function(){$("#register").on("click",function(){var e=!0;$("input","#registerForm").each(function(){var n=$(this);return e=$.validate(n)}),e&&$.ajaxByPost("login/register",{telephone:$("#phone").valTrim(),code:$("#verity").valTrim(),password:$("#newPwd").valTrim(),invite:$("#invite").valTrim()},function(e){200==e.code?window.location.href="login.html":layer.msg(e.detailMessage)})})},loading:function(){layer.msg("保存成功！",{time:5e3,shade:.6,success:function(e,n){var i=e.text(),t=5,a=null,o=function(){e.find(".layui-layer-content").text(i+"("+t+")"),t||(layer.close(n),clearInterval(a)),t--};a=setInterval(o,1e3),o()}},function(){$("#btnSave").removeAttr("disabled")})}};$(e.init)}();